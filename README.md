# Описание проекта

Система  состоит  из  двух  частей:  RESTful  API  сервиса  для  фильтрации  и сортировки  данных  о  погоде  (далее  “сервер”),  а  также  как  минимум  одного сервиса, предоставляющим  данные  о  погоде  (далее  “сенсор”).

Сенсор  представляет  из  себя  приложение,  которое  может  зарегистрировать  себя 
на  сервере.  Далее  через  определенные  промежутки  времени,  сенсор  сообщает 
данные  о  погоде  серверу.  Сервер  принимает  данные  от  сенсора  и  сохраняет  их  в БД.  Клиент  может  получать  данные  с  сервера  о  имеющихся  сенсорах  и  измерениях погоды.

Реализация сервера расположена в WeatherApi, а сенсора – SensorClientApp.

# Запуск системы

## Клиент

В командной строке перейдите в директорию проекта `SensorClientApp`, где находится файл `pom.xml`, и выполните команду:

```bash
mvn clean compile
```

Далее выполните команду:

```bash
mvn exec:java -Dexec.mainClass=org.example.Main
```

## Сервер

Перед запуском сервера необходимо настроить базу данных PostreSQL. Для этого в папке weatherAPI\scr\main\resources отредактируйте файл application.properties следующие поля:
	* spring.datasource.url= это типо ссылка я хз как объяснить
	* spring.datasource.username={владелец бд} имя владельца БД (по умолчанию postgres)
	* spring.datasource.password={пароль} Пароль



В командной строке перейдите в директорию проекта `WeatherApi`, где находится файл `pom.xml`, и выполните команду:

```bash
mvn clean compile
```

Далее выполните команду:

```bash
mvn exec:java -Dexec.mainClass=com.example.weatherAPI.WeatherApiApplication
```

<details><summary></summary>

 # Документация API для системы сбора и обработки данных о погоде

## Введение

Данная документация описывает API системы для сбора и обработки данных о погоде. Система состоит из двух основных компонентов: сервера (RESTful API сервиса) и сенсоров, предоставляющих данные о погоде.

## Базовый URL

{server.ip}

## 1. Регистрация сенсора

### Запрос

Метод: POST

Путь: /sensors/registration

Тело запроса:
{
  "name": "Sensor name"
}

### Ответ

{
  "key": "8bcb5ffa-ff4d-4214-a727-bb01ab90ceaa"
}

### Ошибки

- 400 Bad Request: Если сенсор с таким названием уже существует или название сенсора некорректно.

## 2. Отправка данных о погоде от сенсора

### Запрос

Метод: POST

Путь: /sensors/{key}/measurements

Тело запроса:
{
  "value": 24.5,
  "raining": false
}

### Ошибки

- 400 Bad Request: Если данные не проходят валидацию (например, неверный формат температуры).

## 3. Получение всех активных сенсоров

### Запрос

Метод: GET

Путь: /sensors

### Ответ

[
  {
    "name": "Sensor name",
    "status": "active",
    "lastMeasurement": {
      "value": 24.5,
      "raining": false,
      "timestamp": "2023-11-13T12:30:45Z"
    },
    "key": "8bcb5ffa-ff4d-4214-a727-bb01ab90ceaa"
  },
  // ... другие сенсоры
]

## 4. Получение информации о последних измерениях сенсора

### Запрос

Метод: GET

Путь: /sensors/{key}/measurements

### Ответ

[
  {
    "value": 24.5,
    "raining": false,
    "timestamp": "2023-11-13T12:30:45Z"
  },
  // ... другие измерения
]

## 5. Получение актуальной информации от всех сенсоров

### Запрос

Метод: GET

Путь: /sensors/measurements

### Ответ

[
  {
    "name": "Sensor name",
    "value": 24.5,
    "raining": false,
    "timestamp": "2023-11-13T12:30:45Z"
  },
  // ... другие измерения от всех активных сенсоров
]

## 6. Обработка ошибок

API обрабатывает ошибки запросов и возвращает понятные сообщения:

- 400 Bad Request: Некорректный запрос или данные.
- 404 Not Found: Ресурс не найден.
- 500 Internal Server Error: Внутренняя ошибка сервера.

## 7. Документация API

Подробная документация, включая описания эндпоинтов, форматы запросов и ответов, доступна по адресу {server.ip}/documentation.


</details>

